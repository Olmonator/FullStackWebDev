{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OlmoLecht\\\\Documents\\\\FullStackWebDev\\\\part9\\\\patientor\\\\src\\\\PatientListPage\\\\PatientListing.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Icon } from \"semantic-ui-react\";\nimport { apiBaseUrl } from \"../constants\";\nimport { setDiagnosisList, setPatient, useStateValue } from \"../state\";\nimport DiagnosisList from \"./DiagnosesList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PatientListing = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const [{\n    diagnoses,\n    patient\n  }, dispatch] = useStateValue();\n\n  if (!patient || patient.id !== id) {\n    console.log('fetching patient data');\n    React.useEffect(() => {\n      const fetchPatient = async () => {\n        try {\n          const {\n            data: patientFromApi\n          } = await axios.get(`${apiBaseUrl}/patients/${id}`);\n          dispatch(setPatient(patientFromApi));\n        } catch (e) {\n          console.error(e);\n        }\n      };\n\n      void fetchPatient();\n    }, [dispatch]);\n\n    if (diagnoses.length === 0) {\n      React.useEffect(() => {\n        const fetchDiagnosisCodes = async () => {\n          try {\n            const {\n              data: diagnosesFromApi\n            } = await axios.get(`${apiBaseUrl}/diagnoses`);\n            dispatch(setDiagnosisList(diagnosesFromApi));\n          } catch (e) {\n            console.error(e);\n          }\n        };\n\n        void fetchDiagnosisCodes();\n      }, [dispatch]);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Icon, {\n        loading: true,\n        name: \"spinner\",\n        size: \"big\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [patient.name, patient.gender === 'male' ? /*#__PURE__*/_jsxDEV(Icon, {\n        name: \"mars\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 38\n      }, this) : null, patient.gender === 'female' ? /*#__PURE__*/_jsxDEV(Icon, {\n        name: \"venus\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 40\n      }, this) : null, patient.gender === 'other' ? /*#__PURE__*/_jsxDEV(Icon, {\n        name: \"transgender alternate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 39\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"ssn: \", patient.ssn]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"occupation: \", patient.occupation]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"entries\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), patient.entries.map(entry => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [entry.date, \": \", entry.description, !entry.diagnosisCodes ? null : !diagnoses ? /*#__PURE__*/_jsxDEV(Icon, {\n        loading: true,\n        name: \"spinner\",\n        size: \"big\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 18\n      }, this) : /*#__PURE__*/_jsxDEV(DiagnosisList, {\n        diagnoses: diagnoses,\n        codes: entry.diagnosisCodes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 18\n      }, this)]\n    }, entry.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PatientListing, \"CKAv40nwnR3vrnAjkYJLqy/Ct3Y=\", false, function () {\n  return [useParams, useStateValue];\n});\n\n_c = PatientListing;\nexport default PatientListing;\n\nvar _c;\n\n$RefreshReg$(_c, \"PatientListing\");","map":{"version":3,"sources":["C:/Users/OlmoLecht/Documents/FullStackWebDev/part9/patientor/src/PatientListPage/PatientListing.tsx"],"names":["axios","React","useParams","Icon","apiBaseUrl","setDiagnosisList","setPatient","useStateValue","DiagnosisList","PatientListing","id","diagnoses","patient","dispatch","console","log","useEffect","fetchPatient","data","patientFromApi","get","e","error","length","fetchDiagnosisCodes","diagnosesFromApi","name","gender","ssn","occupation","entries","map","entry","date","description","diagnosisCodes"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { apiBaseUrl } from \"../constants\";\r\nimport { setDiagnosisList, setPatient, useStateValue } from \"../state\";\r\nimport { Diagnosis, Patient } from \"../types\";\r\nimport DiagnosisList from \"./DiagnosesList\";\r\n\r\nconst PatientListing = (): JSX.Element => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const [{ diagnoses, patient }, dispatch] = useStateValue();\r\n\r\n  if (!patient || patient.id !== id) {\r\n    console.log('fetching patient data');\r\n    React.useEffect(() => {\r\n      const fetchPatient = async () => {\r\n        try {\r\n          const { data: patientFromApi } = await axios.get<Patient>(\r\n            `${apiBaseUrl}/patients/${id}`\r\n          );\r\n          dispatch(setPatient(patientFromApi));\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n      };\r\n      void fetchPatient();\r\n    }, [dispatch]); \r\n    if (diagnoses.length === 0) {\r\n      React.useEffect(() => {\r\n        const fetchDiagnosisCodes = async () => {\r\n          try {\r\n            const { data: diagnosesFromApi } = await axios.get<Diagnosis[]>(\r\n              `${apiBaseUrl}/diagnoses`\r\n            );\r\n    \r\n            dispatch(setDiagnosisList(diagnosesFromApi));\r\n          } catch (e) {\r\n            console.error(e);\r\n          }\r\n        };\r\n        void fetchDiagnosisCodes();\r\n      }, [dispatch]);\r\n    }\r\n    return (\r\n      <div>\r\n        <Icon loading name='spinner' size='big' />\r\n      </div>\r\n    );\r\n  }\r\n   \r\n  return (\r\n    <div>\r\n      <h2>\r\n        {patient.name} \r\n        \r\n        {patient.gender === 'male' ? <Icon name='mars' /> : null}\r\n        {patient.gender === 'female' ? <Icon name='venus' /> : null}\r\n        {patient.gender === 'other' ? <Icon name='transgender alternate' /> : null}\r\n      </h2>\r\n      \r\n      <p>\r\n        ssn: {patient.ssn}\r\n      </p>\r\n      <p>\r\n        occupation: {patient.occupation}\r\n      </p>\r\n      <h4>entries</h4>\r\n      {patient.entries.map(entry => \r\n        <div key={entry.id}>\r\n          {entry.date}: {entry.description}\r\n          {!entry.diagnosisCodes\r\n            ? null\r\n            : !diagnoses \r\n              ?  <Icon loading name='spinner' size='big' /> \r\n              :  <DiagnosisList diagnoses={diagnoses} codes={entry.diagnosisCodes} />\r\n          }\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PatientListing;"]},"metadata":{},"sourceType":"module"}